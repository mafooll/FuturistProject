# TEXT TO SQL TELEGRAM BOT (LLM)

Telegram-бот, преобразующий текстовые запросы на русском языке
в безопасные SELECT-запросы к PostgreSQL с помощью LLM.

## запуск

- установите гит репозиторий на локальную машину и перейдите в корневую директорию

```bash
git clone https://github.com/mafooll/FuturistProject.git
cd FuturistProject
```

- заполните `.env.example` своими данными
- переименуйте `.env.example` на `.env`

```bash
mv .env.example .env
```

- установите зависимости (например, через uv)

```bash
uv sync
```

- войдите в окружение .venv

- выполните `make seed-db-and-up` (нужен docker & docker compose)

## дополнительно

### безопасность

- read-only пользователь БД
- SQL валидация перед выполнением
- отсутствие прямого доступа LLM к БД

### подход

- пользователь -> text -> bot
- тект передается в сервис `text_to_sql`
- llm генерирует только `SELECT` запрос
- sql валидируется и выполняется read-only ролью в бд
- при ошибках запрос повторяется с дополнительным контектом
- если есть результат он возвращается пользователю в виде сообщения в боте
